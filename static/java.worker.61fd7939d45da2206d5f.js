(()=>{"use strict";const e=["out of stack space","too much recursion","maximum call stack size exceeded"];function t(t){if(null!=t.message){const r=t.message.toLowerCase().trim().replace(/\s+/g," ").replace(/[^a-z ]/i,"");if(e.includes(r))return"JAVA_STACK_ERROR"}return t.message||"Unknown internal Java matcher error"}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const a=e=>{const t={};for(let r=0;r<e.length;r++){const a=e[r];for(let e=0;e<a.length;e++){const r=a[e],s=n(o(r),2),c=s[0],l=s[1];if(!(c<0))if(c===l)t[c]=[...t[c]||[],r];else for(let e=c;e<l;e++)t[e]=[...t[e]||[],r]}}return t},o=e=>[Math.min(e.start,e.end),Math.max(e.start,e.end)];var s;null==(s=self).performance&&(s.performance={}),null==s.performance.now&&(s.performance.now=()=>Date.now()),importScripts("/static/java8.js"),main(),self.onmessage=function(e){try{const t=performance.now(),{regex:r,testString:n,flags:o}=e.data,[s,c]=self.javaMatches(r,n,function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charAt(r);switch(n){case"g":continue;case"m":t|=8;break;case"i":t|=2;break;case"s":t|=32;break;case"x":t|=4;break;case"d":t|=1;break;case"u":t|=64;break;case"U":t|=256;break;default:throw new Error(`Unknown java flag ${n}`)}}return t}(o),o.includes("g"));if(null!=c){const[[[,e,,t]]]=c;return void self.postMessage({error:e+" near index "+t})}const l=[];for(let e=0;e<s.length;e++){const t=s[e];if(null==t)break;const r=t.map((t=>{const[r,n,a]=t,o=r||"",s=parseInt(n,10);return{content:o,groupNum:parseInt(a,10),start:s,end:s+o.length,isParticipating:null!=r,match:e}}));l.push(r)}self.postMessage({matchResult:l,matchMap:a(l),time:performance.now()-t})}catch(e){self.postMessage({error:t(e)})}},self.postMessage("onload")})();