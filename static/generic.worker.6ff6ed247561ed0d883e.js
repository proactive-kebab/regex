(()=>{"use strict";var e;null==(e=self).performance&&(e.performance={}),null==e.performance.now&&(e.performance.now=()=>Date.now()),self.onmessage=function(e){try{const t=performance.now(),{matchResult:r,tokens:n,captureGroupMap:s,testString:o,listMode:a}=e.data,c=function(e,t,r,n){const s=[];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Math.min(r[0].start,r[0].end),a=Math.max(r[0].start,r[0].end);s.push({start:o,end:a,data:n(t)})}if(r)return s.reduce(((e,t)=>e+t.data),"");let o=t;for(let e=s.length-1;e>=0;e--){const t=s[e];o=o.slice(0,t.start)+t.data+o.slice(t.end)}return o}(r,o,a,(e=>function(e,t,r,n){let s="";for(let a=0,c=e.length;a<c;a++){const c=e[a];if("META"===c.type||"ESCAPED_LITERAL"===c.type||"VERTICAL_TAB"===c.type||"HEX"===c.type||"OCTAL"===c.type||"UNICODE_ESCAPE"===c.type||"SURROGATE_PAIR"===c.type||"BACKSPACE"===c.type)s+=o(c.state,String.fromCodePoint(c.charCode));else if("NUMERIC_BACKREFERENCE"===c.type||"NAMED_BACKREFERENCE"===c.type){let e=c.reference;/^\d+$/.test(c.reference)||null==t||(e=t[c.reference]),r[n][e]&&(s+=o(c.state,r[n][e].content))}else"START_CASE_MODIFIER"!==c.type&&"END_CASE_MODIFIER"!==c.type&&(s+=o(c.state,c.string))}return s;function o(e,t=""){return e.lowercase?t.toLowerCase():e.uppercase?t.toUpperCase():t}}(n,s,r,e)));self.postMessage({result:c,time:performance.now()-t})}catch(e){self.postMessage({error:e.message})}},self.postMessage("onload")})();